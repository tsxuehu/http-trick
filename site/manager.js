!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={1:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([357,0]),n()}({202:function(e,t,n){},203:function(e,t,n){},3:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a={saveFile:function(e){return a.a.post("/profile/savefile",e)},disableRule:function(){return a.a.post("/profile/setRuleState")},enableRule:function(){return a.a.post("/profile/setRuleState?rulestate=1")},disableHost:function(){return a.a.post("/profile/setHostState")},enableHost:function(){return a.a.post("/profile/setHostState?hoststate=1")},disableFilter:function(){return a.a.post("/profile/setFilterState")},enableFilter:function(){return a.a.post("/profile/setFilterState?filterstate=1")},getUserId:function(){return a.a.get("/profile/getUserId")},getUserInfo:function(){return a.a.get("/profile/getUserInfo")},setUserId:function(e){return a.a.get("/profile/setUserId?userId=".concat(e))},unBind:function(e){return a.a.get("/profile/device/unbind?deviceId=".concat(e))},setDeviceName:function(e,t){return a.a.get("/profile/device/setName?deviceId=".concat(e,"&name=").concat(encodeURI(t)))},disableMonitor:function(e){return a.a.get("/profile/device/disableMonitor?deviceId=".concat(e))},deviceUseHost:function(e,t){return a.a.get("/profile/device/usehost?deviceId=".concat(e,"&hostname=").concat(encodeURI(t)))},enableMonitor:function(e){return a.a.get("/profile/device/enableMonitor?deviceId=".concat(e))},setExternalProxy:function(e,t){return t.deviceId=e,a.a.post("/profile/device/externalProxy",t)}}},301:function(e,t,n){},312:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){},330:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"enableRule",(function(){return Gn})),n.d(r,"enableHost",(function(){return Wn})),n.d(r,"enableFilter",(function(){return Xn}));var a={};n.r(a),n.d(a,"initStore",(function(){return er})),n.d(a,"selectHostFile",(function(){return nr})),n.d(a,"switchHost",(function(){return ar})),n.d(a,"switchFilter",(function(){return or})),n.d(a,"switchRule",(function(){return lr})),n.d(a,"setFileCheckStatus",(function(){return ur}));var i={};n.r(i),n.d(i,"setUserId",(function(){return pr})),n.d(i,"setConfigure",(function(){return fr})),n.d(i,"setAppInfo",(function(){return vr})),n.d(i,"setProfile",(function(){return mr})),n.d(i,"setBindedDeviceList",(function(){return hr})),n.d(i,"setHostFileList",(function(){return br})),n.d(i,"setRuleFileList",(function(){return yr})),n.d(i,"setFilters",(function(){return gr})),n.d(i,"setDataList",(function(){return _r}));n(89);var o=n(4),s=n(55),l=n.n(s),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("left-menu")],1),e._v(" "),n("el-container",[n("el-header",{attrs:{height:"72px"}},[n("manager-header")],1),e._v(" "),n("el-main",[n("router-view")],1)],1)],1),e._v(" "),n("rule-edit-form",{ref:"ruleEditForm",attrs:{"data-list":e.dataList,"user-id":e.userId}}),e._v(" "),n("rule-test-form",{ref:"ruleTestForm"}),e._v(" "),n("data-create-form",{ref:"dataCreateForm"}),e._v(" "),n("data-edit-form",{ref:"dataEitForm"})],1)};c._withStripped=!0;var u=n(2),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"left-menu"},[n("h2",[e._v("Http Trick")]),e._v(" "),n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive},on:{select:e.handleSelect}},[e._l(e.menuList,(function(t,r){return[n("div",{key:r},[n("el-menu-item",{attrs:{index:r+""}},[n("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),n("span",{staticClass:"menu-name"},[e._v("\n                      "+e._s(t.name)+"\n                    ")])])],1)]}))],2)],1)};d._withStripped=!0;n(202);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={name:"left-menu",data:function(){return{}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["configure","userId"]),{menuList:function(){var e=[{name:"使用说明",icon:"icon-search",link:"helpinstall"}];return"root"==this.userId&&(e=e.concat([{name:"基础配置",icon:"icon-set",link:"configure"},{name:"转发路径变量",icon:"icon-layers",link:"redirect-path-variable"}])),e=this.configure.professionalVersion?e.concat([{name:"Host 管理",icon:"icon-box",link:"hostfilelist"},{name:"Http 过滤器",icon:"icon-beaker",link:"filter"},{name:"Http 转发",icon:"icon-skip",link:"rulefilelist"},{name:"自定义 mock 数据",icon:"icon-suoding",link:"datalist"},{name:"设备管理",icon:"icon-bargraph",link:"device"},{name:"代理设置",icon:"icon-set",link:"proxyconfig"}]):e.concat([{name:"Http 转发",icon:"icon-skip",link:"rulefilelist"},{name:"自定义 mock 数据",icon:"icon-suoding",link:"datalist"},{name:"代理设置",icon:"icon-set",link:"proxyconfig"}])},defaultActive:function(){var e=location.hash,t="0";return this.menuList.forEach((function(n,r){-1!==e.indexOf(n.link)&&(t=r+"")})),t}}),methods:{handleSelect:function(e,t){var n={};if(2==t.length){var r=t[1].split("-");n=this.menuList[r[0]].children[r[1]]}else n=this.menuList[parseInt(e)];n.targetBlank?window.open(n.link):this.$router.push(n.link)}}},m=n(1),h=Object(m.a)(v,d,[],!1,null,null,null);h.options.__file="src/pages/manager/components/LeftMenu.vue";var b=h.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head-nav"},[n("div",{staticClass:"menu-slot"},[n("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom-start"},on:{command:e.selectHostFile}},[n("el-button",{attrs:{type:"primary",size:"small",disabled:!e.enableHost}},[e._v("\n                Host 切换"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.hostFileList,(function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.id}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.checked?n("i",{staticClass:"el-icon-check"}):e._e()])})),1)],1),e._v(" "),n("span",[n("el-switch",{attrs:{value:e.enableHost,"active-text":"","inactive-text":""},on:{input:e.switchHost}})],1)],1),e._v(" "),n("div",{staticClass:"menu-slot"},[n("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:e.selectRuleFile}},[n("el-button",{attrs:{type:"primary",size:"small",disabled:!e.enableRule}},[e._v("\n                Rule 设置"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.ruleFileList,(function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.id+"-%-"+t.checked}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.checked?n("i",{staticClass:"el-icon-check"}):e._e()])})),1)],1),e._v(" "),n("span",[n("el-switch",{attrs:{value:e.enableRule,"active-text":"","inactive-text":""},on:{input:e.switchRule}})],1)],1),e._v(" "),n("div",{staticClass:"menu-slot"},[e._v("\n        过滤器开关\n        "),n("el-switch",{attrs:{value:e.enableFilter,"active-text":"","inactive-text":""},on:{input:e.switchFilter}})],1),e._v(" "),n("div",{staticClass:"menu-slot link-blank"},[n("a",{attrs:{href:"/monitor.html",target:"_blank"}},[n("el-button",{attrs:{type:"text"}},[e._v("监控窗")])],1),e._v(" "),n("a",{attrs:{href:"/help/index.html",target:"_blank"}},[n("el-button",{attrs:{type:"text"}},[e._v("帮助中心")])],1),e._v(" "),e.appInfo.single?e._e():n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.changeUser}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击切换用户",placement:"top"}},[n("el-button",{attrs:{type:"text"}},[e._v(e._s(e.userId))])],1)],1)])])};y._withStripped=!0;n(203);var g=n(3);function _(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F={name:"ManagerHeader",computed:x({},Object(u.e)(["hostFileList","ruleFileList","appInfo","userId"]),{},Object(u.c)(["enableRule","enableHost","enableFilter"])),methods:x({},Object(u.b)(["selectHostFile","switchHost","switchRule","switchFilter","setFileCheckStatus"]),{selectRuleFile:function(e){var t=e.split("-%-");this.setFileCheckStatus({ruleFileId:t[0],check:"false"==t[1]})},changeUser:function(){this.$prompt("请输入用户名(不输入内容将会使用本机ip作为用户名)","切换用户",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,g.a.setUserId(n||"");case 3:location.reload();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){_(i,r,a,o,s,"next",e)}function s(e){_(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(){}))}})},P=Object(m.a)(F,y,[],!1,null,null,null);P.options.__file="src/pages/manager/components/Header.vue";var O=P.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.isEditRule?"编辑规则":"新建规则","close-on-click-modal":!1,visible:e.visible,width:"900px"},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"rule-edit-form"},[n("div",{staticClass:"config-row"},[n("span",{staticClass:"config-name"},[e._v("规则名:")]),e._v(" "),n("span",{staticClass:"config-value"},[n("el-input",{attrs:{size:"small",placeholder:"方便记忆规则"},model:{value:e.rule.name,callback:function(t){e.$set(e.rule,"name",t)},expression:"rule.name"}})],1)]),e._v(" "),n("div",{staticClass:"config-row"},[n("span",{staticClass:"config-name"},[e._v("匹配规则:")]),e._v(" "),n("span",{staticClass:"config-value match-rule"},[n("div",{staticClass:"match-method"},[n("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.rule.method,callback:function(t){e.$set(e.rule,"method",t)},expression:"rule.method"}},e._l(e.methodList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),n("span",{staticClass:"tips"},[e._v("\n                        不要忘记选择匹配请求方法\n                    ")])],1),e._v(" "),n("div",{staticClass:"match-reg"},[n("el-input",{attrs:{size:"small",placeholder:"填写要拦截的url中部分连续的字符串，或者匹配要拦截url的正则表达式"},model:{value:e.rule.match,callback:function(t){e.$set(e.rule,"match",t)},expression:"rule.match"}}),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.doTestRule(-1)}}},[e._v("\n                        测试\n                    ")])],1)])]),e._v(" "),n("div",{staticClass:"rule-actions"},[e._v("执行操作")]),e._v(" "),n("div",[n("el-table",{attrs:{"highlight-current-row":"",data:e.rule.actionList}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;t.$index;return[n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"row.type"}},e._l(e.ruleTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"description",label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,a=t.$index;return[n("action-value",{attrs:{action:r,"data-list":e.dataList,"allow-redirect-to-local":e.allowRedirectToLocal},on:{"new-data-file":function(t){return e.doNewDataFile(a)},"edit-data-file":function(t){return e.doEditDataFile(t)},"test-rule":function(t){return e.doTestRule(a)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:60,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var r=t.$index;return[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteAction(r)}}})]}}])})],1)],1),e._v(" "),n("div",{staticClass:"bottom-action"},[n("el-button",{on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addAction}},[e._v("新增动作")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.doSaveRule}},[e._v(e._s(e.isEditRule?"保存规则":"创建规则"))])],1)])])};R._withStripped=!0;var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"action-value-container"},["redirect"==e.action.type?n("div",{staticClass:"value-redirect"},[n("el-input",{staticStyle:{width:"500px"},attrs:{size:"small",placeholder:e.redirectPlaceholder},model:{value:e.action.data.target,callback:function(t){e.$set(e.action.data,"target",t)},expression:"action.data.target"}}),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("test-rule")}}},[e._v("\n            测试\n        ")])],1):e._e(),e._v(" "),"mockData"==e.action.type?n("div",{staticClass:"value-mock-data"},[n("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",filterable:"",placeholder:"请选择要返回的数据"},model:{value:e.action.data.dataId,callback:function(t){e.$set(e.action.data,"dataId",t)},expression:"action.data.dataId"}},e._l(e.dataList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),e.datafileEntry?n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("edit-data-file",e.datafileEntry)}}},[e._v("\n          编辑数据\n        ")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("new-data-file")}}},[e._v("增加自定义数据")])],1):e._e(),e._v(" "),"addRequestCookie"==e.action.type?n("div",{staticClass:"value-key-value"},[n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Cookie Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"cookie key"},model:{value:e.action.data.cookieKey,callback:function(t){e.$set(e.action.data,"cookieKey",t)},expression:"action.data.cookieKey"}})],1),e._v(" "),n("div",{staticClass:"row row-last"},[n("span",{staticClass:"label"},[e._v("Cookie Value")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"cookie value"},model:{value:e.action.data.cookieValue,callback:function(t){e.$set(e.action.data,"cookieValue",t)},expression:"action.data.cookieValue"}})],1)]):e._e(),e._v(" "),"addRequestHeader"==e.action.type?n("div",{staticClass:"value-key-value"},[n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Header Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"header key"},model:{value:e.action.data.reqHeaderKey,callback:function(t){e.$set(e.action.data,"reqHeaderKey",t)},expression:"action.data.reqHeaderKey"}})],1),e._v(" "),n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Header Value")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"header value"},model:{value:e.action.data.reqHeaderValue,callback:function(t){e.$set(e.action.data,"reqHeaderValue",t)},expression:"action.data.reqHeaderValue"}})],1)]):e._e(),e._v(" "),"addQuery"==e.action.type?n("div",{staticClass:"value-key-value"},[n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Query Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"query key"},model:{value:e.action.data.queryKey,callback:function(t){e.$set(e.action.data,"queryKey",t)},expression:"action.data.queryKey"}})],1),e._v(" "),n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Query Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"query value"},model:{value:e.action.data.queryValue,callback:function(t){e.$set(e.action.data,"queryValue",t)},expression:"action.data.queryValue"}})],1)]):e._e(),e._v(" "),"addResponseHeader"==e.action.type?n("div",{staticClass:"value-key-value"},[n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Header Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"header key"},model:{value:e.action.data.resHeaderKey,callback:function(t){e.$set(e.action.data,"resHeaderKey",t)},expression:"action.data.resHeaderKey"}})],1),e._v(" "),n("div",{staticClass:"row"},[n("span",{staticClass:"label"},[e._v("Header Key")]),e._v(" "),n("el-input",{staticClass:"value",attrs:{size:"small",placeholder:"header value"},model:{value:e.action.data.resHeaderValue,callback:function(t){e.$set(e.action.data,"resHeaderValue",t)},expression:"action.data.resHeaderValue"}})],1)]):e._e(),e._v(" "),"modifyResponse"==e.action.type?n("div",{staticClass:"value-modify-response"},[n("div",{staticClass:"action-data"},[n("el-select",{staticStyle:{width:"260px"},attrs:{size:"small",placeholder:"请选择修改返回body操作"},model:{value:e.action.data.modifyResponseType,callback:function(t){e.$set(e.action.data,"modifyResponseType",t)},expression:"action.data.modifyResponseType"}},e._l(e.modifyResponseType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),"returnDataInJsonpStyle"==e.action.data.modifyResponseType?n("span",[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"jsonp callback参数名"},model:{value:e.action.data.callbackName,callback:function(t){e.$set(e.action.data,"callbackName",t)},expression:"action.data.callbackName"}})],1):e._e()],1)]):e._e(),e._v(" "),"scriptModifyRequest"==e.action.type?n("div",{staticClass:"value-script"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.action.data.modifyRequestScript,expression:"action.data.modifyRequestScript"}],staticStyle:{width:"100%",height:"90px"},domProps:{value:e.action.data.modifyRequestScript},on:{input:function(t){t.target.composing||e.$set(e.action.data,"modifyRequestScript",t.target.value)}}})]):e._e(),e._v(" "),"scriptModifyResponse"==e.action.type?n("div",{staticClass:"value-script"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.action.data.modifyResponseScript,expression:"action.data.modifyResponseScript"}],staticStyle:{width:"100%",height:"90px"},domProps:{value:e.action.data.modifyResponseScript},on:{input:function(t){t.target.composing||e.$set(e.action.data,"modifyResponseScript",t.target.value)}}})]):e._e()])};C._withStripped=!0;var j=n(21),D=n.n(j),S={name:"action-value",props:["action","dataList","allowRedirectToLocal"],data:function(){return{modifyResponseType:[{value:"addTimestampToJsCss",label:"将html中的js、css请求加上时间戳"},{value:"returnDataInJsonpStyle",label:"以JSONP的方式返回数据"},{value:"allowCros",label:"增加跨域头部"},{value:"return404",label:"返回404"}]}},computed:{datafileEntry:function(){var e=this;if("mockData"==this.action.type){var t=D()(this.dataList,(function(t){return t.id==e.action.data.dataId}));return t||(this.action.data.dataId=""),t}},redirectPlaceholder:function(){return this.allowRedirectToLocal?"填写转发路径(远程地址、或者本地地址。远程地址需要以http/https开头)":"填写转发路径(必须以http/https开头)"}}},$=Object(m.a)(S,C,[],!1,null,null,null);$.options.__file="src/pages/manager/form-widget/rule-edit-form/RuleActionValue.vue";var E=$.exports;n(301);var I,H,T,L={name:"",id:"",method:"",match:"",checked:!0,actionList:[]},q={type:"redirect",data:{target:"",dataId:"",modifyResponseType:"",callbackName:"",cookieKey:"",cookieValue:"",reqHeaderKey:"",reqHeaderValue:"",resHeaderKey:"",resHeaderValue:"",queryKey:"",queryValue:"",modifyRequestScript:"",modifyResponseScript:""}},M={name:"RuleEditForm",props:["dataList","userId"],components:(I={},H=E.name,T=E,H in I?Object.defineProperty(I,H,{value:T,enumerable:!0,configurable:!0,writable:!0}):I[H]=T,I),data:function(){return{visible:!1,isFilterRule:!1,isEditRule:!1,rule:JSON.parse(JSON.stringify(L)),ruleIndex:-1,methodList:[{value:"",label:"所有"},{value:"get",label:"GET"},{value:"post",label:"POST"},{value:"put",label:"PUT"},{value:"patch",label:"PATCH"},{value:"delete",label:"DELETE"},{value:"option",label:"OPTION"}]}},computed:{allowRedirectToLocal:function(){return"root"==this.userId},ruleTypes:function(){return this.isFilterRule?[{value:"addQuery",label:"增加Query"},{value:"addRequestCookie",label:"设置请求cookie"},{value:"addRequestHeader",label:"增加请求头"},{value:"addResponseHeader",label:"增加响应头"},{value:"scriptModifyRequest",label:"js修改请求内容"},{value:"scriptModifyResponse",label:"js修改响应内容"}]:[{value:"redirect",label:"转发请求"},{value:"mockData",label:"返回自定义数据"},{value:"addQuery",label:"增加Query"},{value:"addRequestCookie",label:"设置请求cookie"},{value:"addRequestHeader",label:"增加请求头"},{value:"addResponseHeader",label:"增加响应头"},{value:"modifyResponse",label:"修改响应内容"},{value:"scriptModifyRequest",label:"js修改请求内容"},{value:"scriptModifyResponse",label:"js修改响应内容"}]}},methods:{setEventHandle:function(e){var t=e.onNewDataFile,n=e.onEditDataFile,r=e.onTestRule,a=e.onSaveRule;this.onNewDataFile=t,this.onEditDataFile=n,this.onTestRule=r,this.onSaveRule=a},createRule:function(e){var t,n=e.initialRule,r=e.isFilterRule,a=void 0!==r&&r;if(this.ruleIndex=-1,this.isEditRule=!1,this.isFilterRule=a,n)(t=JSON.parse(JSON.stringify(n))).id="";else{t=JSON.parse(JSON.stringify(L));var i=JSON.parse(JSON.stringify(q));i.type=this.isFilterRule?"addRequestHeader":"redirect",t.actionList.push(i)}this.rule=t,this.visible=!0},editRule:function(e){var t=e.rule,n=e.isFilterRule,r=e.ruleIndex;this.isEditRule=!0,this.ruleIndex=r,this.isFilterRule=n,this.rule=JSON.parse(JSON.stringify(t)),this.visible=!0},setActionDataFileId:function(e,t){this.rule.actionList[e].data.dataId=t},addAction:function(){var e=JSON.parse(JSON.stringify(q));e.type=this.isFilterRule?"addRequestHeader":"redirect",this.rule.actionList.push(e)},deleteAction:function(e){this.rule.actionList.splice(e,1)},doNewDataFile:function(e){this.$emit("new-data-file",e),this.onNewDataFile&&this.onNewDataFile(e)},doEditDataFile:function(e){this.$emit("edit-data-file",e),this.onEditDataFile&&this.onEditDataFile(e)},doTestRule:function(e){var t={actionIndex:e,rule:this.rule};this.$emit("test-rule",t),this.onTestRule&&this.onTestRule(t)},doSaveRule:function(){var e={isEditRule:this.isEditRule,ruleIndex:this.ruleIndex,rule:JSON.parse(JSON.stringify(this.rule))};this.$emit("save",e),this.onSaveRule&&this.onSaveRule(e),this.visible=!1},cancelEdit:function(){this.visible=!1}}},U=Object(m.a)(M,R,[],!1,null,null,null);U.options.__file="src/pages/manager/form-widget/rule-edit-form/Index.vue";var N,z=U.exports;function V(e){N.editRule(e)}function J(e){N.createRule(e)}function B(e){N.setEventHandle(e)}var A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"匹配-转发 测试","close-on-click-modal":!1,visible:e.visible,width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"test-rule-form"},[n("el-form",{attrs:{model:e.testMatchRuleForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"请求"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.testMatchRuleForm.requestMethod,callback:function(t){e.$set(e.testMatchRuleForm,"requestMethod",t)},expression:"testMatchRuleForm.requestMethod"}},e._l(e.requestMethodList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),n("el-input",{attrs:{size:"small"},model:{value:e.testMatchRuleForm.requestUrl,callback:function(t){e.$set(e.testMatchRuleForm,"requestUrl",t)},expression:"testMatchRuleForm.requestUrl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"匹配条件"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.testMatchRuleForm.matchMethod,callback:function(t){e.$set(e.testMatchRuleForm,"matchMethod",t)},expression:"testMatchRuleForm.matchMethod"}},e._l(e.matchMethodList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),n("el-input",{attrs:{size:"small"},model:{value:e.testMatchRuleForm.matchUrl,callback:function(t){e.$set(e.testMatchRuleForm,"matchUrl",t)},expression:"testMatchRuleForm.matchUrl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"转发路径"}},[n("el-input",{attrs:{size:"small"},model:{value:e.testMatchRuleForm.target,callback:function(t){e.$set(e.testMatchRuleForm,"target",t)},expression:"testMatchRuleForm.target"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"匹配结果"}},[n("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.testMatchRuleForm.matchResult,callback:function(t){e.$set(e.testMatchRuleForm,"matchResult",t)},expression:"testMatchRuleForm.matchResult"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"转发结果"}},[n("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.testMatchRuleForm.redirectResult,callback:function(t){e.$set(e.testMatchRuleForm,"redirectResult",t)},expression:"testMatchRuleForm.redirectResult"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"其他信息"}},[n("el-input",{attrs:{size:"small",type:"textarea",disabled:!0},model:{value:e.testMatchRuleForm.message,callback:function(t){e.$set(e.testMatchRuleForm,"message",t)},expression:"testMatchRuleForm.message"}})],1)],1),e._v(" "),n("div",{staticClass:"bottom-action"},[n("el-button",{on:{click:e.cancel}},[e._v("关 闭")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.testMatchRule}},[e._v("测 试")])],1)],1)])};A._withStripped=!0;var K=n(0),Q=n.n(K),G=n(87),W=n.n(G),X=n(29),Y=n.n(X);function Z(e,t){return Q.a.post("/rule/saveRule",t,{params:{ruleFileId:e}})}function ee(e,t){return Q.a.post("/rule/saveRuleFile?id=".concat(e),t)}function te(e){for(var t,n=JSON.stringify(e),r=RegExp("<%=(.+?)%>","g"),a=RegExp("\\$\\{(.+?)\\}","g"),i={};null!=(t=r.exec(n));)i[W()(t[1])]=1;for(;null!=(t=a.exec(n));)i[W()(t[1])]=1;return Y()(i)}n(312);var ne={name:"RuleTestForm",components:{},data:function(){return{visible:!1,testMatchRuleForm:{requestMethod:"",requestUrl:"",matchMethod:"",matchUrl:"",target:"",matchResult:"",redirectResult:"",message:""},matchMethodList:[{value:"",label:"所有"},{value:"get",label:"GET"},{value:"post",label:"POST"},{value:"put",label:"PUT"},{value:"patch",label:"PATCH"},{value:"delete",label:"DELETE"},{value:"option",label:"OPTION"}],requestMethodList:[{value:"get",label:"GET"},{value:"post",label:"POST"},{value:"put",label:"PUT"},{value:"patch",label:"PATCH"},{value:"delete",label:"DELETE"},{value:"option",label:"OPTION"}]}},methods:{cancel:function(){this.visible=!1},testRule:function(e){var t=e.match,n=e.method,r=e.target;this.testMatchRuleForm={requestMethod:"",requestUrl:"",matchMethod:n,matchUrl:t,target:r,matchResult:"",redirectResult:"",message:""},this.visible=!0},testMatchRule:function(){var e=this;(void 0).testRule(this.testMatchRuleForm).then((function(t){var n=t.data;0==n.code&&(e.testMatchRuleForm.matchResult=n.data.matchResult,e.testMatchRuleForm.redirectResult=n.data.redirectResult,e.testMatchRuleForm.message=n.data.message)}))}}},re=Object(m.a)(ne,A,[],!1,null,null,null);re.options.__file="src/pages/manager/form-widget/rule-test-form/Index.vue";var ae,ie=re.exports;function oe(e){var t=e.rule,n=e.actionIndex;ae.testRule({match:t.match,method:t.method,target:n>-1?t.actionList[n].data.target:""})}var se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"新建Mock数据文件",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{attrs:{model:e.addDataFileForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.addDataFileForm.name,callback:function(t){e.$set(e.addDataFileForm,"name",t)},expression:"addDataFileForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"格式"}},[n("el-select",{attrs:{placeholder:"请选择数据文件格式"},model:{value:e.addDataFileForm.contenttype,callback:function(t){e.$set(e.addDataFileForm,"contenttype",t)},expression:"addDataFileForm.contenttype"}},[n("el-option",{attrs:{label:"html",value:"text/html"}}),e._v(" "),n("el-option",{attrs:{label:"json",value:"application/json"}}),e._v(" "),n("el-option",{attrs:{label:"javascript",value:"application/javascript"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addDataFile}},[e._v("确 定")])],1)],1)};se._withStripped=!0;var le=n(8),ce=n(30),ue=n.n(ce);function de(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}var pe,fe,ve={name:"DataCreateForm",components:{},data:function(){return{visible:!1,addDataFileForm:{visible:!1,id:"",name:"",contenttype:""}}},methods:{setEventHandle:function(e){var t=e.onDataFileCreated;this.onDataFileCreated=t},createDataFile:function(){this.visible=!0},addDataFile:(pe=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.visible=!1,t=ue()(),n={id:t,name:this.addDataFileForm.name,contenttype:this.addDataFileForm.contenttype},e.next=5,le.a.createDataFile(n);case 5:if(r=e.sent,0==(a=r.data).code){e.next=10;break}return this.$message.error("出错了，".concat(a.msg)),e.abrupt("return");case 10:this.addDataFileForm.name="",this.addDataFileForm.contenttype="",this.onDataFileCreated&&this.onDataFileCreated(t);case 13:case"end":return e.stop()}}),e,this)})),fe=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=pe.apply(e,t);function i(e){de(a,n,r,i,o,"next",e)}function o(e){de(a,n,r,i,o,"throw",e)}i(void 0)}))},function(){return fe.apply(this,arguments)})}},me=Object(m.a)(ve,se,[],!1,null,null,null);me.options.__file="src/pages/manager/form-widget/data-create-form/Index.vue";var he,be=me.exports;function ye(e){he.setEventHandle(e)}function ge(){he.createDataFile()}var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"editDataFileDialog",attrs:{title:"编辑Mock数据文件","close-on-press-escape":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n            编辑数据文件 "+e._s(e.editDataFileForm.entry.name)+" [Content-Type: "+e._s(e.editDataFileForm.entry.contenttype)+"]\n        ")]),e._v(" "),n("div",{staticStyle:{height:"305px"},attrs:{id:"content-editor-container"}},[n("div",{attrs:{id:"content-editor"}})]),e._v(" "),n("div",[e._v("\n        Press "),n("strong",[e._v("F11")]),e._v(" when cursor is in the editor to\n        toggle full screen editing. "),n("strong",[e._v("Esc")]),e._v(" can also be used\n        to "),n("i",[e._v("exit")]),e._v(" full screen editing.\n    ")]),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{on:{click:e.toggleFullScreen}},[e._v("全屏")]),e._v(" "),n("el-button",{on:{click:e.formatEditor}},[e._v("格式化")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.finishEditDataFile}},[e._v("确 定")])],1)])};_e._withStripped=!0;var we=n(20),xe=n.n(we),ke=(n(315),n(316),n(317),n(137),n(318),n(15)),Fe=n.n(ke);n(321);function Pe(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Pe(i,r,a,o,s,"next",e)}function s(e){Pe(i,r,a,o,s,"throw",e)}o(void 0)}))}}var Re,Ce,je=null,De={name:"DataEditForm",data:function(){return{visible:!1,editDataFileForm:{entry:{},content:""}}},methods:{editDataFile:(Ce=Oe(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editDataFileForm.entry=t,e.next=3,le.a.getDataFile(t.id);case 3:if(n=e.sent,0==(r=n.data).code){e.next=8;break}return this.$message.error("出错了，".concat(r.msg)),e.abrupt("return");case 8:if(this.visible=!0,!je){e.next=15;break}je.setValue(r.data),je.setOption("mode",t.contenttype),this.$nextTick((function(){je.refresh(),je.focus()})),e.next=18;break;case 15:return e.next=17,Fe()(200);case 17:window.editor=je=new xe.a(document.getElementById("content-editor"),{value:r.data,mode:t.contenttype,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{F11:function(e){a.toggleFullScreen()},Esc:function(e){a.closeFullScreen()}}});case 18:case"end":return e.stop()}}),e,this)}))),function(e){return Ce.apply(this,arguments)}),toggleFullScreen:function(){je.setOption("fullScreen",!je.getOption("fullScreen")),je.focus()},closeFullScreen:function(){je.getOption("fullScreen")&&(je.setOption("fullScreen",!1),je.focus())},formatEditor:function(){try{if(!/json/i.test(this.editDataFileForm.entry.contenttype))return;var e=je.getValue(),t=JSON.stringify(JSON.parse(e),null,4);je.setValue(t),je.refresh(),je.focus()}catch(e){}},finishEditDataFile:(Re=Oe(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.editDataFileForm.entry,e.next=3,le.a.saveDataFile(t.id,je.getValue());case 3:n=e.sent,0==(r=n.data).code?(this.editDataFileForm.entry={},this.visible=!1,je.setValue("")):this.$message.error("出错了，".concat(r.msg));case 6:case"end":return e.stop()}}),e,this)}))),function(){return Re.apply(this,arguments)})}},Se=Object(m.a)(De,_e,[],!1,null,null,null);Se.options.__file="src/pages/manager/form-widget/data-edit-form/Index.vue";var $e,Ee,Ie=Se.exports;function He(e){$e.editDataFile(e)}function Te(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(n,!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue,Ne={name:"app",components:(Ee={},Me(Ee,b.name,b),Me(Ee,O.name,O),Me(Ee,z.name,z),Me(Ee,ie.name,ie),Me(Ee,be.name,be),Me(Ee,Ie.name,Ie),Ee),data:function(){return{}},computed:qe({},Object(u.e)(["dataList","userId"])),methods:qe({},Object(u.b)(["initStore"])),created:(Ue=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Te(i,r,a,o,s,"next",e)}function s(e){Te(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initStore();case 1:case"end":return e.stop()}}),e,this)}))),function(){return Ue.apply(this,arguments)}),mounted:function(){var e=this.$refs,t=e.ruleEditForm,n=e.ruleTestForm,r=e.dataCreateForm,a=e.dataEitForm;N=t,function(e){ae=e}(n),function(e){he=e}(r),function(e){$e=e}(a)}},ze=Object(m.a)(Ne,c,[],!1,null,null,null);ze.options.__file="src/pages/manager/App.vue";var Ve=ze.exports,Je=n(88),Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"view-configure"},[n("div",{staticClass:"main-content__title"},[e._v("基础配置修改")]),e._v(" "),n("el-form",{attrs:{"label-width":"200px"}},[n("el-form-item",{attrs:{label:"是否开启Http代理"}},[n("el-checkbox",{model:{value:e.configureFormData.startHttpProxy,callback:function(t){e.$set(e.configureFormData,"startHttpProxy",t)},expression:"configureFormData.startHttpProxy"}},[e._v("开启")])],1),e._v(" "),n("el-form-item",{attrs:{label:"是否开启Socks5代理"}},[n("el-checkbox",{model:{value:e.configureFormData.startSocks5,callback:function(t){e.$set(e.configureFormData,"startSocks5",t)},expression:"configureFormData.startSocks5"}},[e._v("开启")])],1),e._v(" "),n("el-form-item",{attrs:{label:"是否开启DNS服务"}},[n("el-checkbox",{model:{value:e.configureFormData.startDns,callback:function(t){e.$set(e.configureFormData,"startDns",t)},expression:"configureFormData.startDns"}},[e._v("开启")])],1),e._v(" "),n("el-form-item",{attrs:{label:"是否开启专业版"}},[n("el-checkbox",{model:{value:e.configureFormData.professionalVersion,callback:function(t){e.$set(e.configureFormData,"professionalVersion",t)},expression:"configureFormData.professionalVersion"}},[e._v("开启")])],1),e._v(" "),n("el-form-item",{attrs:{label:"Http代理端口"}},[n("el-input",{attrs:{placeholder:"http代理端口"},model:{value:e.configureFormData.httpProxyPort,callback:function(t){e.$set(e.configureFormData,"httpProxyPort",t)},expression:"configureFormData.httpProxyPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Socks5端口"}},[n("el-input",{attrs:{placeholder:"socks5代理端口"},model:{value:e.configureFormData.socks5ProxyPort,callback:function(t){e.$set(e.configureFormData,"socks5ProxyPort",t)},expression:"configureFormData.socks5ProxyPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"WebUi端口"}},[n("el-input",{attrs:{placeholder:"WebUi端口"},model:{value:e.configureFormData.webUiPort,callback:function(t){e.$set(e.configureFormData,"webUiPort",t)},expression:"configureFormData.webUiPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"DNS端口"}},[n("el-input",{attrs:{placeholder:"DNS端口"},model:{value:e.configureFormData.dnsPort,callback:function(t){e.$set(e.configureFormData,"dnsPort",t)},expression:"configureFormData.dnsPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"超时时间"}},[n("el-input",{attrs:{placeholder:"远程服务器响应超时，proxy会终止请求"},model:{value:e.configureFormData.requestTimeoutTime,callback:function(t){e.$set(e.configureFormData,"requestTimeoutTime",t)},expression:"configureFormData.requestTimeoutTime"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.saveFile}},[e._v("保存")])],1)],1)],1)};Be._withStripped=!0;var Ae=function(e){return Q.a.post("/configure/savefile",e)};n(322);function Ke(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We,Xe={name:"configure",data:function(){return{configureFormData:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["configure"])),watch:{configure:function(e){this.configureFormData=JSON.parse(JSON.stringify(e))}},methods:{saveFile:(We=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ke(i,r,a,o,s,"next",e)}function s(e){Ke(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.configureFormData).requestTimeoutTime=+t.requestTimeoutTime,t.httpProxyPort=+t.httpProxyPort,t.socks5ProxyPort=+t.socks5ProxyPort,t.dnsPort=+t.dnsPort,t.webUiPort=+t.webUiPort,e.next=8,Ae(t);case 8:n=e.sent,0==(r=n.data).code?this.$message({showClose:!0,type:"success",message:"保存成功!"}):this.$message.error("出错了，".concat(r.msg));case 11:case"end":return e.stop()}}),e,this)}))),function(){return We.apply(this,arguments)})},mounted:function(){this.configureFormData=JSON.parse(JSON.stringify(this.configure))}},Ye=Object(m.a)(Xe,Be,[],!1,null,null,null);Ye.options.__file="src/pages/manager/views/configure/Configure.vue";var Ze=Ye.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-wraper"},[n("div",{staticClass:"main-content__title"},[e._v("转发路径变量管理")]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("配置http转发规则时，转发路径可以引用这里的变量。例如：将http请求转发到${ helloworld }/dist/hello.js，${\n        helloworld }会被替换为变量helloworld对应的值。\n    ")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.redirectPathVariableArray}},[n("el-table-column",{attrs:{prop:"key",label:"变量名",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"工程名"},model:{value:t.row.key,callback:function(n){e.$set(t.row,"key",n)},expression:"scope.row.key"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"value",label:"变量值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"工程在本地的绝对路径"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"60",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"delete-btn",attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.deleteParam(t.row,t.$index)}}})]}}])})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"50px","text-align":"right"}},[n("el-button",{on:{click:e.addParam}},[e._v("增加工程路径设置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveFile}},[e._v("保存")])],1)],1)};et._withStripped=!0;var tt=n(12),nt=n.n(tt);n(330);function rt(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot={name:"project-path",data:function(){return{redirectPathVariableArray:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["profile"])),watch:{profile:function(e){var t=[];nt()(e.redirectPathVariables,(function(e,n){t.push({key:n,value:e})})),this.redirectPathVariableArray=t}},methods:{deleteParam:function(e,t,n){var r=this;this.$confirm("此操作不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.redirectPathVariableArray.splice(t,1)}))},saveFile:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){rt(i,r,a,o,s,"next",e)}function s(e){rt(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},nt()(this.redirectPathVariableArray,(function(e){t[e.key]=e.value})),(n=JSON.parse(JSON.stringify(this.profile))).redirectPathVariables=t,e.next=6,g.a.saveFile(n);case 6:r=e.sent,0==(a=r.data).code?this.$message({showClose:!0,type:"success",message:"保存成功!"}):this.$message.error("出错了，".concat(a.msg));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),addParam:function(){this.redirectPathVariableArray.push({key:"",value:""})}},mounted:function(){var e=[];nt()(this.profile.redirectPathVariables,(function(t,n){e.push({key:n,value:t})})),this.redirectPathVariableArray=e}},st=Object(m.a)(ot,et,[],!1,null,null,null);st.options.__file="src/pages/manager/views/configure/RedirectPathVariable.vue";var lt=st.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"host-view"},[n("div",{staticClass:"main-content__title"},[e._v("Host 文件列表")]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("只允许一个host文件生效。")]),e._v(" "),n("div",{staticClass:"host-list-op"},[n("el-button",{attrs:{size:"small"},on:{click:e.addNewHostFile}},[e._v("新增 Host 文件")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.importRemoteHostFile}},[e._v("导入远程规则")])],1),e._v(" "),n("el-table",{attrs:{border:"",align:"center",data:e.hostFileList,"row-key":"id"}},[n("el-table-column",{attrs:{prop:"name",label:"名字",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:180},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"host-file-op-container"},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.onDeleteFile(t.row)}}}),e._v(" "),n("a",{attrs:{href:"#/edithost?id="+t.row.id}},[n("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"mini"}})],1),e._v(" "),n("span",[n("el-button",{attrs:{type:"info",icon:"el-icon-share",size:"mini"},on:{click:function(n){return e.onShareFile(t.row)}}})],1)],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"checked",label:"启用",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row.id,disabled:!e.enableHost},model:{value:e.selectedFileId,callback:function(t){e.selectedFileId=t},expression:"selectedFileId"}})]}}])})],1)],1)};ct._withStripped=!0;var ut=n(9),dt=n.n(ut);function pt(e){return Q.a.get("/host/usefile?id=".concat(e))}function ft(e,t){return Q.a.post("/host/savefile?id=".concat(e),t)}n(332);var vt={getRemoteFile:function(e){return Q.a.get("/utils/getRemoteFile?url=".concat(encodeURIComponent(e)))}};function mt(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ht(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){mt(i,r,a,o,s,"next",e)}function s(e){mt(i,r,a,o,s,"throw",e)}o(void 0)}))}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt,_t,wt={name:"hostlist",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(n,!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["hostFileList","appInfo"]),{},Object(u.c)(["enableHost"]),{selectedFileId:{get:function(){var e=D()(this.hostFileList,(function(e){return e.checked}));return e?e.id:""},set:function(e){this.useFile(e)}}}),methods:{onDeleteFile:function(e){var t=this;this.$confirm("此操作将永久删除该文件: ".concat(e.name,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n;(n=e.id,Q.a.get("/host/deletefile?id=".concat(n))).then((function(e){var n=e.data;0==n.code?t.$message({showClose:!0,type:"success",message:"删除成功!"}):t.$message.error("出错了，".concat(n.msg))}))}))},useFile:(_t=ht(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=3,pt(t);case 3:r=e.sent,n.close(),0==(a=r.data).code?this.$message({showClose:!0,type:"success",message:"设置成功!"}):this.$message.error("出错了,请刷新页面，".concat(a.msg));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return _t.apply(this,arguments)}),addNewHostFile:function(){this.$router.push("createhostfile")},onShareFile:function(e,t){var n="http://".concat(this.appInfo.pcIp,":").concat(this.appInfo.webUiPort,"/host/file/raw?id=").concat(encodeURIComponent(e.id));dt()(n),this.$message("已复制Host ".concat(encodeURIComponent(e.name),"链接"))},importRemoteHostFile:(gt=ht(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$prompt("请输入远程Host文件的url","导入远程规则",{confirmButtonText:"确定",cancelButtonText:"取消"});case 2:return t=e.sent,e.next=5,this.$prompt("请输入导入Host的文件名","导入远程规则",{confirmButtonText:"确定",cancelButtonText:"取消"});case 5:return n=e.sent,r=t.value,a=n.value,e.next=10,vt.getRemoteFile(r);case 10:return i=e.sent,o=i.data,(s=o.data).meta={remote:!0,url:r},s.name=a,s.checked=!1,e.next=18,ft("",s);case 18:l=e.sent,0==(c=l.data).code?this.$message({showClose:!0,message:"恭喜你，导入成功",type:"success"}):this.$message.error("出错了，".concat(c.msg));case 21:case"end":return e.stop()}}),e,this)}))),function(){return gt.apply(this,arguments)})}},xt=Object(m.a)(wt,ct,[],!1,null,null,null);xt.options.__file="src/pages/manager/views/host/FileList.vue";var kt=xt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("编辑Host文件"+e._s(e.loaded?": "+e.filecontent.name:""))]),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:6,offset:18}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveFile}},[e._v("保存文件")])],1)],1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.filecontent.content,expression:"filecontent.content"}],staticClass:"host-editor",attrs:{placeholder:e.hostExample},domProps:{value:e.filecontent.content},on:{input:function(t){t.target.composing||e.$set(e.filecontent,"content",t.target.value)}}})],1)};Ft._withStripped=!0;n(333);var Pt={name:"app",data:function(){return{loaded:!1,filecontent:{content:""}}},computed:{hostExample:function(){return"#示例\n8.8.8.8    www.google.com\n4.4.4.4    *.taobao.com #所有后缀为.taobao.com的域名都被解析为4.4.4.4\n6.6.6.6    www.youzan.com h5.youzan.com"}},methods:{getFile:function(){var e,t=this;this.loaded=!1,(e=this.$route.query.id,Q.a.get("/host/getfile?id=".concat(e))).then((function(e){var n=e.data;0==n.code?(t.loaded=!0,t.filecontent=n.data,t.hostarray=[],nt()(t.filecontent.content,(function(e,n){t.hostarray.push({key:n,value:e})}))):t.$message.error("出错了，".concat(n.msg))}))},saveFile:function(){var e=this;ft(this.$route.query.id,this.filecontent).then((function(t){var n=t.data;0==n.code?e.$message({showClose:!0,type:"success",message:"保存成功!"}):e.$message.error("出错了，".concat(n.msg))}))}},mounted:function(){this.getFile()},watch:{$route:function(e,t){this.getFile()}}},Ot=Object(m.a)(Pt,Ft,[],!1,null,null,null);Ot.options.__file="src/pages/manager/views/host/EditHost.vue";var Rt=Ot.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("创建Host文件")]),e._v(" "),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{margin:"20px",width:"60%","min-width":"600px"},attrs:{model:e.createFileForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"文件名字",prop:"name"}},[n("el-input",{model:{value:e.createFileForm.name,callback:function(t){e.$set(e.createFileForm,"name",t)},expression:"createFileForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文件描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.createFileForm.description,callback:function(t){e.$set(e.createFileForm,"description",t)},expression:"createFileForm.description"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),n("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)],1)};Ct._withStripped=!0;var jt={name:"app",data:function(){return{createFileForm:{name:"",description:""},rules:{name:[{required:!0,message:"请输入文件名称名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请填文件描述",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var n,r;(n=t.createFileForm.name,r=t.createFileForm.description,Q.a.post("/host/create",{name:n,description:r})).then((function(e){var n=e.data;0==n.code?(t.$message({showClose:!0,message:"恭喜你，创建成功",type:"success"}),t.$router.push("edithost?id=".concat(n.data.id))):t.$message.error("出错了，".concat(n.msg))}))}))},back:function(){this.$router.push("hostfilelist")}}},Dt=Object(m.a)(jt,Ct,[],!1,null,null,null);Dt.options.__file="src/pages/manager/views/host/CreateFile.vue";var St=Dt.exports,$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("规则集列表")]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("http转发规则以规则集的方式组织，可以控制单个规则集是否启用。")]),e._v(" "),n("div",{staticClass:"rule-list-op"},[n("div",{staticClass:"op"},[n("el-button",{attrs:{size:"small"},on:{click:e.importRemoteRule}},[e._v("导入远程规则")])],1),e._v(" "),n("div",{staticClass:"op"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRuleCollection}},[e._v("新增规则集")])],1)]),e._v(" "),n("el-table",{attrs:{border:"",data:e.ruleFileList,"row-key":"id"}},[n("el-table-column",{attrs:{prop:"name",label:"名字",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.name)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:230},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"rule-file-op-container"},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.onDeleteFile(t.row,t.$index)}}}),e._v(" "),n("a",{attrs:{href:"#/editrule?id="+t.row.id}},[n("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"mini"}})],1),e._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-download",size:"mini"},on:{click:function(n){return e.onDownloadFile(t.row,t.$index)}}}),e._v(" "),n("span",[n("el-button",{attrs:{type:"info",icon:"el-icon-share",size:"mini"},on:{click:function(n){return e.onShareFile(t.row,t.$index)}}})],1)],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:t.row.checked,disabled:!e.enableRule},on:{input:function(n){return e.onSelectionChange(t.row)}}})]}}])})],1)],1)};$t._withStripped=!0;n(334);function Et(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(n,!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt,qt={name:"rulefilelist",computed:Ht({},Object(u.e)(["ruleFileList","appInfo"]),{},Object(u.c)(["enableRule"])),methods:Ht({},Object(u.b)(["setFileCheckStatus"]),{onDeleteFile:function(e,t){var n=this;this.$confirm("此操作将永久删除该文件: ".concat(e.name,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t;(t=e.id,Q.a.get("/rule/deletefile?id=".concat(t))).then((function(e){var t=e.data;0==t.code?n.$message({showClose:!0,type:"success",message:"删除成功!"}):n.$message.error("出错了，".concat(t.msg))}))}))},onDownloadFile:function(e,t){e.meta.remote?this.$alert(e.meta.url,"规则URL",{confirmButtonText:"OK",callback:function(e){}}):window.location="/rule/download?id="+e.id},onSelectionChange:function(e){this.setFileCheckStatus({ruleFileId:e.id,check:!e.checked})},onShareFile:function(e,t){var n="http://".concat(this.appInfo.pcIp,":").concat(this.appInfo.webUiPort,"/rule/file/raw?id=").concat(encodeURIComponent(e.id));dt()(n),this.$message("已复制规则".concat(encodeURIComponent(e.name),"链接"))},importRemoteRule:(Lt=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Et(i,r,a,o,s,"next",e)}function s(e){Et(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,l,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$prompt("请输入远程规则文件的url","导入远程规则",{confirmButtonText:"确定",cancelButtonText:"取消"});case 2:return t=e.sent,e.next=5,this.$prompt("请输入导入规则的文件名","导入远程规则",{confirmButtonText:"确定",cancelButtonText:"取消"});case 5:return n=e.sent,r=t.value,a=n.value,e.next=10,vt.getRemoteFile(r);case 10:i=e.sent,o=i.data,(s=o.data).meta={remote:!0,url:r},s.id="",s.name=a,s.checked=!1,l=te(s),c=l.length>0?"导入规则文件名为".concat(s.name,",引用变量【").concat(l.join("; "),"】请确保变量已经在转发路径变量中设置过"):"导入规则文件名为".concat(s.name),this.$alert(c,"导入远程规则",{confirmButtonText:"确定",callback:function(e){"confirm"==e&&ee(s.id,s).then((function(e){var t=e.data;0==t.code?u.$message({showClose:!0,message:"恭喜你，导入成功",type:"success"}):u.$message.error("出错了，".concat(t.msg))}))}});case 20:case"end":return e.stop()}}),e,this)}))),function(){return Lt.apply(this,arguments)}),addRuleCollection:function(){this.$router.push("createrulefile")}})},Mt=Object(m.a)(qt,$t,[],!1,null,null,null);Mt.options.__file="src/pages/manager/views/rule/FileList.vue";var Ut=Mt.exports,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("编辑规则集"+e._s(e.loaded?": "+e.filecontent.name:""))]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("可以控制单个规则是否启用，当规则所在规则集没有启用时，规则不管是否启用，都不会生效。")]),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"right"},attrs:{gutter:20}},[n("el-col",{attrs:{span:6,offset:18}},[n("el-button",{attrs:{size:"small"},on:{click:e.addRule}},[e._v("新增规则")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{border:"","row-key":"id",stripe:!0,align:"center",data:e.filecontent.ruleList}},[n("el-table-column",{attrs:{label:"启用",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.checked},on:{input:function(n){return e.toggleRuleCheckState(t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"规则名",width:"150",prop:"name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"匹配方法",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.method?t.row.method:"全部")+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"匹配路径",width:"300",prop:"match",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"执行操作",prop:"match",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",e._l(t.row.actionList,(function(t,r){return n("action-view",{key:r,attrs:{action:t,"data-list":e.dataList}})})),1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"action-panel"},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.onDeleteRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-document",size:"mini"},on:{click:function(n){return e.onDuplicateRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.onEditRule(t.row,t.$index)}}})],1)]}}])})],1)],1)};Nt._withStripped=!0;var zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"action-value-container"},["redirect"==e.action.type?n("div",{staticClass:"value-redirect row"},[n("span",{staticClass:"name"},[e._v("转发")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.target))])]):e._e(),e._v(" "),"mockData"==e.action.type?n("div",{staticClass:"value-mock-data row"},[n("span",{staticClass:"name"},[e._v("返回mock数据")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.datafileEntry.name))])]):e._e(),e._v(" "),"addRequestCookie"==e.action.type?n("div",{staticClass:"value-key-value row"},[n("span",{staticClass:"name"},[e._v("设置请求Cookie")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.cookieKey)+":"+e._s(e.action.data.cookieValue))])]):e._e(),e._v(" "),"addRequestHeader"==e.action.type?n("div",{staticClass:"value-key-value row"},[n("span",{staticClass:"name"},[e._v("设置请求头")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.reqHeaderKey)+":"+e._s(e.action.data.reqHeaderValue))])]):e._e(),e._v(" "),"addQuery"==e.action.type?n("div",{staticClass:"value-key-value row"},[n("span",{staticClass:"name"},[e._v("增加请求Query")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.queryKey)+":"+e._s(e.action.data.queryValue))])]):e._e(),e._v(" "),"addResponseHeader"==e.action.type?n("div",{staticClass:"value-key-value row"},[n("span",{staticClass:"name"},[e._v("增加响应头")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.resHeaderKey)+":"+e._s(e.action.data.resHeaderValue))])]):e._e(),e._v(" "),"modifyResponse"==e.action.type?n("div",{staticClass:"value-modify-response row"},[n("span",{staticClass:"name"},[e._v("修改响应Body")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.modifyResponseDescription))])]):e._e(),e._v(" "),"scriptModifyRequest"==e.action.type?n("div",{staticClass:"value-script row"},[n("span",{staticClass:"name"},[e._v("Js修改请求内容")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.modifyRequestScript))])]):e._e(),e._v(" "),"scriptModifyResponse"==e.action.type?n("div",{staticClass:"value-script"},[n("span",{staticClass:"name"},[e._v("Js修改响应内容")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.action.data.modifyResponseScript))])]):e._e()])};zt._withStripped=!0;var Vt={name:"actionView",props:["action","dataList"],data:function(){return{modifyResponseType:[{value:"addTimestampToJsCss",label:"将html中的js、css请求加上时间戳"},{value:"returnDataInJsonpStyle",label:"以JSONP的方式返回数据"},{value:"allowCros",label:"增加跨域头部"},{value:"return404",label:"返回404"}]}},computed:{datafileEntry:function(){var e=this;if("mockData"==this.action.type){var t=D()(this.dataList,(function(t){return t.id==e.action.data.dataId}));return t||{name:"!没有找到数据文件!"}}},modifyResponseDescription:function(){var e=this;if("modifyResponse"==this.action.type){var t=D()(this.modifyResponseType,(function(t){return t.value==e.action.data.modifyResponseType}));return t?"returnDataInJsonpStyle"!=t.value?t.label:t.label+"( callback参数名: "+action.data.callbackName+" )":"未知类型"}return""}}},Jt=Object(m.a)(Vt,zt,[],!1,null,null,null);Jt.options.__file="src/pages/manager/components/ActionView.vue";var Bt=Jt.exports;n(335);function At(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){At(i,r,a,o,s,"next",e)}function s(e){At(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt,Xt,Yt,Zt,en={name:"edit-rule",components:Gt({},Bt.name,Bt),data:function(){return{loaded:!1,name:"",filecontent:{meta:{}}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(n,!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["dataList"])),methods:{setEventHandle:function(){var e=this;B({onNewDataFile:function(t){e.requestNewDataFile(t)},onEditDataFile:function(t){e.requestEditDataFile(t)},onTestRule:function(t){e.testRule(t)},onSaveRule:function(t){e.saveRule(t)}})},requestNewDataFile:function(e){ye({onCreated:function(t){!function(e){N.setActionDataFileId(e)}(e)}}),ge()},requestEditDataFile:function(e){He(e)},getFile:(Zt=Kt(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loaded=!1,this.ruleFileId=this.$route.query.id,e.next=4,r=this.ruleFileId,Q.a.get("/rule/getfile?id=".concat(r));case 4:t=e.sent,0==(n=t.data).code?(this.filecontent=n.data,this.loaded=!0):this.$message.error("出错了，".concat(n.msg));case 7:case"end":return e.stop()}var r}),e,this)}))),function(){return Zt.apply(this,arguments)}),testRule:function(e){oe({rule:e.rule,actionIndex:e.actionIndex})},addRule:function(){this.setEventHandle(),J({})},onDuplicateRow:function(e,t){this.setEventHandle(),J({initialRule:e})},onEditRule:function(e,t){this.setEventHandle(),V({rule:e,ruleIndex:t})},onDeleteRow:(Yt=Kt(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return r=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=5,n=this.filecontent.id,a=t.id,Q.a.get("/rule/removeRule",{params:{ruleFileId:n,ruleId:a}});case 5:return e.next=7,this.getFile();case 7:return e.next=9,Fe()(500);case 9:r.close();case 10:case"end":return e.stop()}var n,a}),e,this)}))),function(e,t){return Yt.apply(this,arguments)}),toggleRuleCheckState:(Xt=Kt(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=3,r=this.filecontent.id,a=t.id,i=!t.checked,Q.a.get("/rule/setRuleCheckedState",{params:{ruleFileId:r,ruleId:a,checked:i?1:0}});case 3:return e.next=5,this.getFile();case 5:return e.next=7,Fe()(500);case 7:n.close();case 8:case"end":return e.stop()}var r,a,i}),e,this)}))),function(e){return Xt.apply(this,arguments)}),saveRule:(Wt=Kt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isEditRule,n=t.rule,t.ruleIndex,r=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=4,Z(this.filecontent.id,n);case 4:return e.next=6,this.getFile();case 6:return e.next=8,Fe()(500);case 8:r.close();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Wt.apply(this,arguments)})},mounted:function(){this.getFile()},watch:{$route:function(e,t){this.getFile()}}},tn=Object(m.a)(en,Nt,[],!1,null,null,null);tn.options.__file="src/pages/manager/views/rule/EditRule.vue";var nn=tn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("创建规则集")]),e._v(" "),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{margin:"20px",width:"60%","min-width":"600px"},attrs:{model:e.createFileForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"规则集名字",prop:"name"}},[n("el-input",{model:{value:e.createFileForm.name,callback:function(t){e.$set(e.createFileForm,"name",t)},expression:"createFileForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"规则集描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.createFileForm.description,callback:function(t){e.$set(e.createFileForm,"description",t)},expression:"createFileForm.description"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),n("el-button",{on:{click:function(t){return e.back()}}},[e._v("返回")])],1)],1)],1)};rn._withStripped=!0;var an={name:"app",data:function(){return{createFileForm:{name:"",checked:!0,description:""},rules:{name:[{required:!0,message:"请输入文件名称名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 20 个字符",trigger:"blur"}],description:[{required:!0,message:"请填文件描述",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var n,r;(n=t.createFileForm.name,r=t.createFileForm.description,Q.a.post("/rule/create",{name:n,description:r})).then((function(e){var n=e.data;0==n.code?(t.$message({showClose:!0,message:"恭喜你，创建成功",type:"success"}),t.$router.push("editrule?id=".concat(n.data.id))):t.$message.error("出错了，".concat(n.msg))}))}))},back:function(){this.$router.push("rulefilelist")}}},on=Object(m.a)(an,rn,[],!1,null,null,null);on.options.__file="src/pages/manager/views/rule/CreateFile.vue";var sn=on.exports,ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("过滤器")]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("一个http请求会可以执行多个匹配的过滤器；过滤器可以用于向http请求里植入登录态。可以控制单个过滤器是否启用")]),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"right"},attrs:{gutter:20}},[n("el-col",{attrs:{span:6,offset:18}},[n("el-button",{attrs:{size:"small"},on:{click:e.addRule}},[e._v("新增过滤器")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{border:"","row-key":"id",stripe:!0,align:"center",data:e.filters}},[n("el-table-column",{attrs:{prop:"checked",label:"启用",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.checked,disabled:!e.enableFilter},on:{input:function(n){return e.toggleRuleCheckState(t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"规则名",width:"150",prop:"name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"匹配方法",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.method?t.row.method:"全部")+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"匹配路径",width:"300",prop:"match",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"执行操作",prop:"match",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",e._l(t.row.actionList,(function(t,r){return n("action-view",{key:r,attrs:{action:t,"data-list":e.dataList}})})),1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"action-panel"},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.onDeleteRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-document",size:"mini"},on:{click:function(n){return e.onDuplicateRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.onEditRule(t.row,t.$index)}}})],1)]}}])})],1)],1)};ln._withStripped=!0;n(336);function cn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function un(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){cn(i,r,a,o,s,"next",e)}function s(e){cn(i,r,a,o,s,"throw",e)}o(void 0)}))}}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fn,vn={name:"filters",components:pn({},Bt.name,Bt),computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(n,!0).forEach((function(t){pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["dataList"]),{},Object(u.e)(["filters"]),{},Object(u.c)(["enableFilter"])),methods:{setEventHandle:function(){var e=this;B({onTestRule:function(t){e.testRule(t)},onSaveRule:function(t){e.saveRule(t)}})},addRule:function(){this.setEventHandle(),J({isFilterRule:!0})},onDuplicateRow:function(e,t){this.setEventHandle(),J({initialRule:e,isFilterRule:!0})},onEditRule:function(e,t){this.setEventHandle(),V({rule:e,ruleIndex:t,isFilterRule:!0})},onDeleteRow:function(){var e=un(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r=t.id,Q.a.get("/filter/removeRule",{params:{ruleId:r}}),n.close();case 5:case"end":return e.stop()}var r}),e,this)})));return function(t){return e.apply(this,arguments)}}(),testRule:function(e){oe({rule:e.rule,actionIndex:e.actionIndex})},toggleRuleCheckState:function(e){var t,n,r=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t=e.id,n=!e.checked,Q.a.get("/filter/setRuleCheckedState",{params:{ruleId:t,checked:n?1:0}}),r.close()},saveRule:function(e){e.isEditRule;var t,n=e.rule,r=(e.ruleIndex,this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}));t=n,Q.a.post("/filter/saveRule",t),r.close()},saveFileRightNow:(fn=un(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(void 0)(t);case 2:0==e.sent.code&&this.$message({showClose:!0,type:"success",message:"保存成功!"});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return fn.apply(this,arguments)})}},mn=Object(m.a)(vn,ln,[],!1,null,null,null);mn.options.__file="src/pages/manager/views/filter/Filter.vue";var hn=mn.exports,bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("自定义数据文件列表")]),e._v(" "),n("div",{staticClass:"project-path-info"},[e._v("在http转发规则里面，可以配置将这里的mock数据返回给浏览器")]),e._v(" "),n("div",{staticClass:"top-op"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.requestAddDataFile()}}},[e._v("新增数据文件")])],1),e._v(" "),n("el-table",{attrs:{border:"",align:"center",data:e.dataList}},[n("el-table-column",{attrs:{prop:"name",label:"名字",align:"center",width:"300",sortable:!0}}),e._v(" "),n("el-table-column",{attrs:{prop:"contenttype",label:"类型",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:136,align:"center",context:e._self},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.requestEditDataFile(t.row)}}}),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.deleteDataFile(t.row,t.$index)}}})]}}])})],1)],1)};bn._withStripped=!0;n(337);function yn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){yn(i,r,a,o,s,"next",e)}function s(e){yn(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xn={name:"mockdatalist",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(n,!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["dataList"])),methods:{requestAddDataFile:function(){ye({}),ge()},requestEditDataFile:function(e){He(e)},deleteDataFile:function(e,t){var n=this;this.$confirm("此操作将永久删除该数据文件: ".concat(e.name,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(gn(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le.a.removeDataFile(e);case 2:r=t.sent,0==(a=r.data).code?n.$message({showClose:!0,type:"success",message:"删除成功!"}):n.$message.error("出错了，".concat(a.msg));case 5:case"end":return t.stop()}}),t)}))))}}},kn=Object(m.a)(xn,bn,[],!1,null,null,null);kn.options.__file="src/pages/manager/views/data/DataList.vue";var Fn=kn.exports,Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main-content__title"},[e._v("绑定的设备列表")]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"bind-qrcode-panel"},[n("div",{staticClass:"title"},[e._v("扫码绑定设备")]),e._v(" "),n("div",{staticClass:"qrcode"},[n("img",{staticClass:"bind-qrcode",attrs:{src:e.imgUrl}})]),e._v(" "),n("div",{staticClass:"bottom"},[n("el-button",{attrs:{type:"text"},on:{click:e.copyBindUrl}},[e._v("点击复制绑定链接")])],1)]),e._v(" "),n("el-table",{staticStyle:{width:"800px"},attrs:{border:"",align:"center",data:e.bindedDeviceList}},[n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"150",sortable:!0}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"Name",align:"center",sortable:!0}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:136,align:"center",context:e._self},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.unbind(t.row,t.$index)}}})]}}])})],1)],1)};Pn._withStripped=!0;var On=n(31),Rn=n.n(On);n(339);function Cn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sn,$n={name:"DeviceList",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(n,!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["bindedDeviceList","appInfo","userId"]),{bindUrl:function(){return"http://".concat(this.appInfo.pcIp,":").concat(this.appInfo.webUiPort,"/profile/device/bind?userId=").concat(this.userId)},imgUrl:function(){return Rn.a.toDataURL(this.bindUrl,4)}}),methods:{copyBindUrl:function(){dt()(this.bindUrl),this.$message("已将设备绑定链接复制到剪切板，在设备中打开此url即可绑定设备")},unbind:(Sn=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Cn(i,r,a,o,s,"next",e)}function s(e){Cn(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.unBind(t.id);case 2:this.$message("解绑成功");case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return Sn.apply(this,arguments)})}},En=Object(m.a)($n,Pn,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"project-path-info"},[this._v("\n        列表中的设备通过http trick发起请求时，请求会被当前用户的过滤器、规则处理。"),t("br"),this._v("\n        如果设备没有绑定任何用户则会使用root用户的过滤器、规则。"),t("br"),this._v("\n        扫描右边的二维码可绑定设备。\n    ")])}],!1,null,null,null);En.options.__file="src/pages/manager/views/device/DeviceList.vue";var In=En.exports,Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"install-body"},[n("h1",[e._v("Http Trick")]),e._v(" "),n("h2",{attrs:{id:"toc_0"}},[e._v("一、说明")]),e._v(" "),n("p",[e._v("http trick是http协议代理工具，需要设置浏览器代理或者系统代理才能使用本工具。")]),e._v(" "),n("p",[e._v("远程PAC: "+e._s(e.remotePacUrl))]),e._v(" "),n("p",[e._v("本地PAC: "+e._s(e.localPacUrl))]),e._v(" "),n("h2",{attrs:{id:"toc_1"}},[e._v("二、chrome 代理插件安装(用于设置浏览器代理)")]),e._v(" "),e._m(0),e._v(" "),n("h4",{attrs:{id:"toc_2"}},[e._v("插件使用说明")]),e._v(" "),e._m(1),e._v(" "),n("h2",{attrs:{id:"toc_3"}},[e._v("三、证书安装")]),e._v(" "),n("h4",{attrs:{id:"toc_4"}},[e._v("1. 为什么需要安装证书")]),e._v(" "),e._m(2),e._v(" "),n("h4",{attrs:{id:"toc_5"}},[e._v("2. 证书下载")]),e._v(" "),n("ol",[n("li",[e._v("mac 系统请"),n("a",{attrs:{href:e.url}},[e._v("点击下载到本地安装")])]),e._v(" "),n("li",[e._v("手机请扫码安装证书"),n("img",{staticClass:"install-body__qrcode",attrs:{src:e.imgUrl}})]),e._v(" "),e._m(3)])])};Hn._withStripped=!0;n(340);function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn={name:"help-info",data:function(){return{}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(n,!0).forEach((function(t){Ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["appInfo","userId"]),{url:function(){return"http://"+this.appInfo.pcIp+":"+this.appInfo.webUiPort+"/utils/rootCA.crt"},imgUrl:function(){var e="http://"+this.appInfo.pcIp+":"+this.appInfo.webUiPort+"/utils/rootCA.crt";return Rn.a.toDataURL(e,4)},remotePacUrl:function(){return"http://".concat(this.appInfo.pcIp,":").concat(this.appInfo.webUiPort,"/profile/").concat(this.userId,"/proxy.pac")},localPacUrl:function(){return"http://127.0.0.1:".concat(this.appInfo.webUiPort,"/profile/").concat(this.userId,"/proxy.pac")}})},Mn=Object(m.a)(qn,Hn,[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("推荐安装 SwitchyOmega "),t("a",{attrs:{href:"https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?hl=en-US",target:"_blank"}},[this._v("点击安装代理插件")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",[n("li",[e._v("安装完插件后请设置插件代理地址为"),n("code",[e._v("127.0.0.1")]),e._v("，代理协议: http，端口为"),n("code",[e._v("http trick")]),e._v("代理端口(默认8001)。")]),e._v(" "),n("li",[e._v("如不清楚如何配置 SwitchyOmega，请参考 "),n("a",{attrs:{href:"/help/chrome/",target:"_blank"}},[e._v("chrome 代理设置指南")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("由于"),t("code",[this._v("http trick")]),this._v("会代理 https 的请求，所以需要本地安装"),t("code",[this._v("http trick")]),this._v("的https 证书。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[this._v("证书信任请参考"),t("a",{attrs:{href:"/help/cert/",target:"_blank"}},[this._v("如何信任证书")])])}],!1,null,null,null);Mn.options.__file="src/pages/manager/views/help/Install.vue";var Un=Mn.exports,Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"socks-configure"},[n("div",{staticClass:"main-content__title"},[e._v("代理配置")]),e._v(" "),n("el-form",{attrs:{"label-width":"200px"}},[n("el-form-item",{attrs:{label:"使用外部代理"}},[n("el-checkbox",{model:{value:e.profileEditForm.externalProxy,callback:function(t){e.$set(e.profileEditForm,"externalProxy",t)},expression:"profileEditForm.externalProxy"}},[e._v("使用")])],1),e._v(" "),e.profileEditForm.externalProxy?n("el-form-item",{attrs:{label:"外部代理类型"}},[n("el-radio-group",{model:{value:e.socks5Proxy,callback:function(t){e.socks5Proxy=t},expression:"socks5Proxy"}},[n("el-radio",{attrs:{label:!0}},[e._v("Socks5代理")]),e._v(" "),n("el-radio",{attrs:{label:!1}},[e._v("Http代理")])],1)],1):e._e(),e._v(" "),e.profileEditForm.externalProxy&&!e.socks5Proxy?n("el-form-item",{attrs:{label:"External Http代理"}},[n("div",{staticClass:"http-proxy"},[n("el-input",{staticClass:"ip",attrs:{placeholder:"Http Proxy Ip"},model:{value:e.profileEditForm.httpProxyIp,callback:function(t){e.$set(e.profileEditForm,"httpProxyIp",t)},expression:"profileEditForm.httpProxyIp"}}),e._v("\n                :\n                "),n("el-input",{staticClass:"port",attrs:{placeholder:"http Proxy port"},model:{value:e.profileEditForm.httpProxyPort,callback:function(t){e.$set(e.profileEditForm,"httpProxyPort",t)},expression:"profileEditForm.httpProxyPort"}})],1)]):e._e(),e._v(" "),e.profileEditForm.externalProxy&&e.socks5Proxy?n("el-form-item",{attrs:{label:"External Socks代理"}},[n("div",{staticClass:"http-proxy"},[n("el-input",{staticClass:"ip",attrs:{placeholder:"Socks5 Proxy Ip"},model:{value:e.profileEditForm.socks5ProxyIp,callback:function(t){e.$set(e.profileEditForm,"socks5ProxyIp",t)},expression:"profileEditForm.socks5ProxyIp"}}),e._v("\n                :\n                "),n("el-input",{staticClass:"port",attrs:{placeholder:"socks5 Proxy port"},model:{value:e.profileEditForm.socks5ProxyPort,callback:function(t){e.$set(e.profileEditForm,"socks5ProxyPort",t)},expression:"profileEditForm.socks5ProxyPort"}})],1)]):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"需要Http解析代理的域名"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.profileEditForm.goThroughProxyConfig,expression:"profileEditForm.goThroughProxyConfig"}],staticClass:"socks-editor",attrs:{placeholder:e.socksProxyExample},domProps:{value:e.profileEditForm.goThroughProxyConfig},on:{input:function(t){t.target.composing||e.$set(e.profileEditForm,"goThroughProxyConfig",t.target.value)}}})]),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.saveFile}},[e._v("保存")])],1)],1)],1)};Nn._withStripped=!0;n(341);function zn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn={name:"configure",data:function(){return{profileEditForm:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(n,!0).forEach((function(t){Jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["profile"]),{socksProxyExample:function(){return"#示例\nall               # 有all 配置项，所有域名君走http解析代理\n*.domain.com      # 所有domain域名都会走Http解析代理\nwww.domain.com    # www.domain.com走Http解析代理"},socks5Proxy:{get:function(){return this.profileEditForm.externalSocks5Proxy},set:function(e){var t=this.profileEditForm;e?(t.externalSocks5Proxy=!0,t.externalHttpProxy=!1):(t.externalSocks5Proxy=!1,t.externalHttpProxy=!0)}}}),watch:{profile:function(e){this.profileEditForm=JSON.parse(JSON.stringify(e))}},methods:{saveFile:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){zn(i,r,a,o,s,"next",e)}function s(e){zn(i,r,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.saveFile(this.profileEditForm);case 2:t=e.sent,0==(n=t.data).code?this.$message({showClose:!0,type:"success",message:"保存成功!"}):this.$message.error("出错了，".concat(n.msg));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.profileEditForm=JSON.parse(JSON.stringify(this.profile))}},An=Object(m.a)(Bn,Nn,[],!1,null,null,null);An.options.__file="src/pages/manager/views/proxy/Configure.vue";var Kn=An.exports;o.default.use(Je.a);var Qn=new Je.a({routes:[{path:"/configure",component:Ze},{path:"/redirect-path-variable",component:lt},{path:"/hostfilelist",component:kt},{path:"/edithost",component:Rt},{path:"/createhostfile",component:St},{path:"/rulefilelist",component:Ut},{path:"/editrule",component:nn},{path:"/createrulefile",component:sn},{path:"/filter",component:hn},{path:"/datalist",component:Fn},{path:"/device",component:In},{path:"/helpinstall",component:Un,alias:"/"},{path:"/proxyconfig",component:Kn}]}),Gn=function(e){return e.profile.enableRule||!1},Wn=function(e){return e.profile.enableHost||!1},Xn=function(e){return e.profile.enableFilter||!1};function Yn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Zn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Yn(i,r,a,o,s,"next",e)}function s(e){Yn(i,r,a,o,s,"throw",e)}o(void 0)}))}}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=Zn(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,t.dispatch,e.next=3,g.a.getUserId();case 3:if(r=e.sent,a=r.data.data.userId,n("setUserId",a),window.io){e.next=9;break}return console.error("没有websock环境"),e.abrupt("return");case 9:(i=io("/manager")).on("configure",(function(e){n("setConfigure",e)})),i.on("appinfo",(function(e){n("setAppInfo",e)})),i.on("profile",(function(e){n("setProfile",e)})),i.on("bindedDeviceList",(function(e){n("setBindedDeviceList",e)})),i.on("hostfilelist",(function(e){n("setHostFileList",e)})),i.on("rulefilelist",(function(e){n("setRuleFileList",e)})),i.on("filters",(function(e){n("setFilters",e)})),i.on("datalist",(function(e){n("setDataList",e)}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e,t){return rr.apply(this,arguments)}function rr(){return(rr=Zn(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,t.dispatch,e.next=3,pt(n);case 3:if(r=e.sent,0==(a=r.data).code){e.next=7;break}throw new Error(a.msg);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e){return ir.apply(this,arguments)}function ir(){return(ir=Zn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.profile.enableHost){e.next=6;break}return e.next=4,g.a.disableHost();case 4:e.next=8;break;case 6:return e.next=8,g.a.enableHost();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){return sr.apply(this,arguments)}function sr(){return(sr=Zn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.profile.enableFilter?g.a.disableFilter():g.a.enableFilter();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e){return cr.apply(this,arguments)}function cr(){return(cr=Zn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.profile.enableRule?g.a.disableRule():g.a.enableRule();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e,t){return dr.apply(this,arguments)}function dr(){return(dr=Zn(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=n.ruleFileId,a=n.check,e.next=4,s=r,l=a,Q.a.get("/rule/setfilecheckstatus?id=".concat(s,"&checked=").concat(l?1:0));case 4:if(i=e.sent,0==(o=i.data).code){e.next=8;break}throw new Error(o.msg);case 8:case"end":return e.stop()}var s,l}),e)})))).apply(this,arguments)}function pr(e,t){e.userId=t}function fr(e,t){e.configure=t}function vr(e,t){e.appInfo=t}function mr(e,t){e.profile=t}function hr(e,t){e.bindedDeviceList=t}function br(e,t){e.hostFileList=t}function yr(e,t){e.ruleFileList=t}function gr(e,t){e.filters=t}function _r(e,t){e.dataList=t}o.default.use(u.a);var wr=new u.a.Store({state:{userId:"guest",appInfo:{appName:"",single:!0,httpProxyPort:"",httpsProxyPort:"",socks5ProxyPort:"",dnsPort:"",webUiPort:"",startHttpProxy:!0,startSocks5:!0,startDns:!1,pcIp:""},configure:{professionalVersion:!1,httpProxyPort:8001,socks5ProxyPort:8002,dnsPort:53,webUiPort:40001,startDns:!1,startSocks5:!0,startHttpProxy:!0,requestTimeoutTime:3e4,useCustomRootCA:!1,remoteDnsServer:""},profile:{redirectPathVariables:{},enableRule:!0,enableHost:!0,enableFilter:!0,goThroughProxyConfig:"",externalProxy:!1,externalHttpProxy:!1,externalSocks5Proxy:!0,httpProxyIp:"",httpProxyPort:8888,socks5ProxyIp:"",socks5ProxyPort:8889},bindedDeviceList:[],rule:[],hostFileList:[],ruleFileList:[],filters:[],dataList:[]},getters:r,actions:a,mutations:i});n(138),n(342),n(343);o.default.use(l.a),new o.default({el:"#app",router:Qn,store:wr,render:function(e){return e(Ve)}}),document.addEventListener("keydown",(function(e){if((event.ctrlKey||event.metaKey)&&83==event.which)return event.preventDefault(),!1}),!0)},8:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(30),o=n.n(i);t.a={getDataList:function(){return a.a.get("/data/getdatalist")},removeDataFile:function(e){return a.a.post("/data/removedatafile",e)},createDataFile:function(e){return a.a.post("/data/createdatafile",e)},getDataFile:function(e){return a.a.get("/data/getdatafile?id=".concat(e))},saveDataFile:function(e,t){var n=new FormData;return n.append("content",t),a.a.post("/data/savedatafile?id=".concat(e),n)},saveDataEntryFromTraffic:function(e,t,n){return a.a.post("/data/savedatafromtraffic",{id:o()(),name:t,contenttype:n,reqid:e})}}}});